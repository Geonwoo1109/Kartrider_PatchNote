var Key ="";
var allsee = "\u200d".repeat (500);

const Jsoup = org.jsoup.Jsoup;
const Fs = FileStream;
var NewMaster = [
"[ê´€ë¦¬ì]_ì—í‹°ì„ ìƒ",
"[ê´€ë¦¬ì]_ì¸ì¸ê¹€ê¸°ë¦¬",
"[ê´€ë¦¬ì]_ì¸ì¸ê¹€ë¹„ì„œ",
"[ê´€ë¦¬ì]_ì¤‘ì¤‘ì´ì• ì˜¤",
"[ê´€ë¦¬ì]_Hyewonnn",
"[ê´€ë¦¬ì]_K1ngZico",
"[ì„œí¬í„°]_ì—ì€€"];

function response(room, msg, sender, isGroupChat, replier, imageDB, packageName) {
  /*12ì‹œ ì•Œë¦¼*/
  if (room == "ì¹´í†¡ë´‡ í…ŒìŠ¤íŠ¸ë°©" && sender == "ë°©ì¥ë´‡" && msg == "12ì‹œ") {
    replier.reply("(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š","ì ì‹¬ì‹œê°„ì´ë„¤ìš”! ë‹¤ë“¤ ì ì‹¬ë¨¹ê³  ê²Œì„í•˜ì„¸ìš”~");
    replier.reply("(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š",
    "ë‹‰ë„¤ì„ë´‡ ì°¸ì—¬ì½”ë“œëŠ” [0000404]ì…ë‹ˆë‹¤!\nì°¸ì—¬ì½”ë“œëŠ” ë„ë°°ë°©ì§€ë¥¼ ìœ„í•¨ì´ë‹ˆ ì–‘í•´ë°”ëë‹ˆë‹¤~");
  }
  if (room == "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š" && sender =="LEGê±´ìš°") {
    if (msg == "ã…‚ã…Šã…ã……ã…‡") {
    replier.reply("ë²ˆì°½í•˜ì„¸ìš”");
    }
  }

/*
try {

if (msg.startsWith(".ê´€ë¦¬ììœ„ì„ ")
    && ((sender == "á´³áµ‰áµ’â¿Ê·áµ’áµ’ á´·â±áµ")||(sender == "LEGê±´ìš°")) ) {
  NewMaster = Fs.read ("/sdcard/ì¹´ìœ ëª¨/ê´€ë¦¬ìëª©ë¡").slice ("*");
 
  if (NewMaster.includes (sender) || sender == "á´³áµ‰áµ’â¿Ê·áµ’áµ’ á´·â±áµ") {
  replier.reply ("["+msg.substr (7)+"] ë‹˜ì„ ê´€ë¦¬ì ëª©ë¡ì— ì¶”ê°€í•©ë‹ˆë‹¤.");
  Fs.append ("/sdcard/ì¹´ìœ ëª¨/ê´€ë¦¬ìëª©ë¡", msg.substr (7) + "*");
  }
}
if (msg == ".ê´€ë¦¬ìì´ˆê¸°í™”" && (sender == "á´³áµ‰áµ’â¿Ê·áµ’áµ’ á´·â±áµ")||(sender == "LEGê±´ìš°")) {
  Fs.write ("/sdcard/ì¹´ìœ ëª¨/ê´€ë¦¬ìëª©ë¡", "[ê´€ë¦¬ì]_ì—í‹°ì„ ìƒ*");
}
} catch (e) {
  replier.reply (e);
*/
if (msg == ".ë´‡") replier.reply ("ë‹‰ë„¤ì„ í™•ì¸ë´‡ì— ê´€í•œ ì •ë³´ì…ë‹ˆë‹¤" + allsee
  +"\n\n\n[ì„¤ëª…]"+"\nì¹´íŠ¸ë¼ì´ë” ìœ ì €ì˜ ë‹‰ë„¤ì„ê³¼ ê°€ì¥ ìµœê·¼ì˜ ë§¤ì¹˜ê¸°ë¡ì„ ì•Œë ¤ì£¼ëŠ” ë´‡ì…ë‹ˆë‹¤. ì´ ì™¸ì—ë„ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤."
  +"\n\n[ëª…ë ¹ì–´ ëª©ë¡]" + "\n.ìœ ì € ë‹‰ë„¤ì„ ex).ìœ ì € ì—í‹°ì„ ìƒ\n.ë§¤ì¹˜ ë‹‰ë„¤ì„ ex).ë§¤ì¹˜ ì—í‹°ì„ ìƒ"
  +"\n\n[ë´‡ ì‚¬ìš© ê°€ëŠ¥ì]\n" + NewMaster.join("\n")
  +"\n\n[ë´‡ ê´€ë ¨ ë¬¸ì˜]\nì˜¤í”ˆì±„íŒ…ë°© [LEGê±´ìš°]");
 
if ((room == "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š" &&
(NewMaster.includes (sender))||(sender == "LEGê±´ìš°"))
  || room != "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š") {

if (msg.startsWith(".ìœ ì € ")) {
     try {
     User = msg.substr(4);
//     replier.reply (msg.substr (4));
    let data3 = Jsoup.connect ("https://api.nexon.co.kr/kart/v1.0/users/nickname/" + User)
    .header ("Authorization", Key).data ("nickname", User)
    .ignoreContentType(true).get().text();
    data3 = JSON.parse(data3);
   
     replier.reply (
     "ìœ ì € ê³ ìœ  Id: " + data3 ["accessId"]
     + "\nê²Œì„ ë‹‰ë„¤ì„: " + data3 ["name"]
     + "\në ˆë²¨: " + data3 ["level"]);
   } catch (e) {
     replier.reply("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¼ì´ë” ì´ë¦„ì…ë‹ˆë‹¤.\nê²€ìƒ‰í•  ìˆ˜ ì—†ëŠ” ì´ìœ ëŠ”? -> [.ì´ìœ ]");
   }
  }
  if (msg == ".ì´ìœ ") {
    replier.reply("[ë‹‰ë„¤ì„ì´ ê²€ìƒ‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°]\n\n1. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìœ ì €ì¼ ë•Œ\n2. ë‹‰ë„¤ì„ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ\n3. ì˜¤ë«ë™ì•ˆ ì ‘ì†í•˜ì§€ ì•Šì€ ë³µê·€ìœ ì €ì¼ ë•Œ");
  }

//ë§¤ì¹˜ë°ì´í„°

if (msg.startsWith(".ë§¤ì¹˜ ")) {
 
  try {
    let userId = Jsoup.connect ("https://api.nexon.co.kr/kart/v1.0/users/nickname/" + msg.substr(4))
    .header ("Authorization", Key).data ("nickname", msg.substr (4))
    .ignoreContentType(true).get().text();
   
    let matchData = Jsoup.connect (
    "https://api.nexon.co.kr/kart/v1.0/users/"
    + JSON.parse (userId)["accessId"] +
    "/matches?start_date=&end_date=&offset=&limit=1&match_types=")
    .header ("Authorization", Key).ignoreContentType(true).get().text();
   
    try {
    let Final = Jsoup.connect(
    "https://api.nexon.co.kr/kart/v1.0/matches/"
    + JSON.parse (matchData).matches[0].matches[0].matchId)
    .header ("Authorization", Key).ignoreContentType(true).get().text();
   
    var a = [];
    for (i=0; i<JSON.parse (Final)["players"].length; i++) {
     
      a.push (JSON.parse (Final).players[i].characterName);
      //replier.reply (JSON.parse (Final).players[i].characterName);
    }
    replier.reply ("[ê°œì¸ì „] ì°¸ì—¬ì„ ìˆ˜ëª©ë¡\n\n" + a.join ("\n"));
    a = [];
    replier.reply (a);
   
  } catch (e1) {
    let Final = Jsoup.connect(
    "https://api.nexon.co.kr/kart/v1.0/matches/"
    + JSON.parse (matchData).matches[0].matches[0].matchId)
    .header ("Authorization", Key).ignoreContentType(true).get().text();
   
    a = [];
    for (i=0; i<JSON.parse (Final).teams[0].players.length; i++) {
      a.push (JSON.parse (Final).teams[0].players[i].characterName);
    }
    a.push ("vs");
   
    for (i=0; i<JSON.parse (Final).teams[0].players.length; i++) {
      a.push (JSON.parse (Final).teams[1].players[i].characterName);
    }
    replier.reply ("[íŒ€ì „] ì°¸ì—¬ì„ ìˆ˜ëª©ë¡\n\n" + a.join ("\n"));
    a = [];
   
  }

  } catch (e) {
    replier.reply ("ê¸°ë¡ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
  }

}
 
 
 
}
}
