var Key =
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50X2lkIjoiOTkwNDM3MjIxIiwiYXV0aF9pZCI6IjQiLCJ0b2tlbl90eXBlIjoiQWNjZXNzVG9rZW4iLCJzZXJ2aWNlX2lkIjoiNDMwMDExMzkzIiwiWC1BcHAtUmF0ZS1MaW1pdCI6IjIwMDAwOjEwIiwibmJmIjoxNjA4MzkxODMyLCJleHAiOjE2NzE0NjM4MzIsImlhdCI6MTYwODM5MTgzMn0.qxByvfxvxjxf213RwwmYh046kOvDncQYOPfPxlWnngE";
var allsee = "\u200d".repeat (500);

const Jsoup = org.jsoup.Jsoup;
var Master = ["",
"[ê´€ë¦¬ì]_ì—í‹°ì„ ìƒ",
"[ê´€ë¦¬ì]_ë£¨ëŒí”„í˜œì›",
"[ê´€ë¦¬ì]_ë§Œë ™ëª¨í—˜ê°€",
"[ê´€ë¦¬ì]_ì¸ì¸ê¹€ì—¬ì‹ ",
"[ê´€ë¦¬ì]_Hyewonnn",
"[ê´€ë¦¬ì]_MerryZico",
"[ê´€ë¦¬ì]_í˜ìŠ˜ì°",
"[ê´€ë¦¬ì]_í˜ìŠ˜ì°",
"[ê´€ë¦¬ì]_í—ë ë´‰ë””",
"[ì„œí¬í„°]_RasCalì¤‘ì¤‘",
"ì—í‹°ì„ ìƒ",
"ê¹€ê±´ìš°",
"LEGê±´ìš° / 17ë‚¨ / í¸ì§‘ë‚¨ì½”ë”©ë‚¨"];

function response(room, msg, sender, isGroupChat, replier, imageDB, packageName) {
  if (room == "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š" && sender == "ë°©ì¥ë´‡") {
    // replier.reply ("í™˜ì˜í•©ë‹ˆë‹¤~ ì¹´íŠ¸ë¼ì´ë” ë‹‰ë„¤ì„ì´ì‹ ê°€ìš”?");
  }
  

     if ((room == "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š" && Master.includes (sender)) || room != "(PC)ì¹´íŠ¸ë¼ì´ë” ìœ ì €ë“¤ì˜ ëª¨ì„ğŸ”Š") {
       
       
if (msg.startsWith(".ìœ ì € ")) {
     try {
     User = msg.substr(4);
//     replier.reply (msg.substr (4));
    let data3 = Jsoup.connect ("https://api.nexon.co.kr/kart/v1.0/users/nickname/" + User)
    .header ("Authorization", Key).data ("nickname", User)
    .ignoreContentType(true).get().text();
    data3 = JSON.parse(data3);
    
     replier.reply (
     "ìœ ì € ê³ ìœ  Id: " + data3 ["accessId"]
     + "\nê²Œì„ ë‹‰ë„¤ì„: " + data3 ["name"]
     + "\në ˆë²¨: " + data3 ["level"]);
   } catch (e) {
     replier.reply("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¼ì´ë” ì´ë¦„ì…ë‹ˆë‹¤." + "\n\nì£¼ì˜: ìµœê·¼ì— ë‹‰ë„¤ì„ì„ ë³€ê²½í•˜ì…¨ê±°ë‚˜ ë³µê·€í•˜ì‹  ì´ë ¥ì´ ìˆë‹¤ë©´ ì¸ì‹ì´ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
   }
  }

if (msg.startsWith(".ë§¤ì¹˜ ")) {
  try {
    let userId = Jsoup.connect ("https://api.nexon.co.kr/kart/v1.0/users/nickname/" + msg.substr(4))
    .header ("Authorization", Key).data ("nickname", msg.substr (4))
    .ignoreContentType(true).get().text();
//    replier.reply (data3);
/*
     replier.reply (
     "ìœ ì € ê³ ìœ  Id: " + data3 ["accessId"]
     + "\nê²Œì„ ë‹‰ë„¤ì„: " + data3 ["name"]
     + "\në ˆë²¨: " + data3 ["level"]);
*/
    replier.reply (JSON.parse (userId)["accessId"]);
    
    let matchData = Jsoup.connect (
    "https://api.nexon.co.kr/kart/v1.0/users/"
    + JSON.parse (userId)["accessId"] +
    "/matches?start_date=&end_date=&offset=&limit=1&match_types=")
    .header ("Authorization", Key).ignoreContentType(true).get().text();
    
    replier.reply (JSON.parse (matchData)["nickName"]
    
    + "\n" + JSON.parse (matchData).matches[0].matches[0].matchId
    //ë­ë“ ì§€ ë°°ì—´ì´ë©´ [0]
    );
    
    let Final = Jsoup.connect(
    "https://api.nexon.co.kr/kart/v1.0/matches/"
    + JSON.parse (matchData).matches[0].matches[0].matchId)
    .header ("Authorization", Key).ignoreContentType(true).get().text();
    
    replier.reply (
    JSON.parse (Final)["matchType"]
    + "\n" + JSON.parse (Final)["startTime"]
    + "\n" + JSON.parse (Final)["players"].length
    + "\n" + JSON.parse (Final).players[0].characterName
    );
    var a = [];
    for (i=0; i<JSON.parse (Final)["players"].length; i++) {
      
      a.push (JSON.parse (Final).players[i].characterName);
      replier.reply (JSON.parse (Final).players[i].characterName);
    }
    replier.reply (a);
    a = [];
    replier.reply (a);
        
  } catch (e1) {
    replier.reply (e1);
  }
}
  
  
  
}
}
